<!-- build time:Wed Aug 17 2022 14:44:54 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Tracy-xu&#39;Blog"><meta name="author" content="Tracy Xu"><meta property="og:title" content="Tracy-xu&#39;Blog"><meta property="og:description" content="Tracy-xu&#39;Blog"><meta property="og:site_name" content="Tracy-xu&#39;Blog"><meta property="og:type" content="website"><meta name="twitter:card" content="summary"><title>page - Tracy-xu&#39;Blog</title><link rel="stylesheet" href="/plugins/bootstrap/css/bootstrap.min.css" type="text/css"><link href="/plugins/font-awesome/css/font-awesome.min.css" type="text/css" rel="stylesheet"><link href="/plugins/featherlight/featherlight.min.css" type="text/css" rel="stylesheet"><link rel="stylesheet" href="/css/style.css"></head><body><div class="bg-gradient"></div><div class="bg-pattern"></div><div class="menu-bg"><div class="menu-container"><ul><li class="menu-item"><a href="/">首页</a></li><li class="menu-item"><a href="/archives">归档</a></li><li class="menu-item"><a href="/categories">分类</a></li><li class="menu-item"><a href="/about.html">关于我</a></li></ul></div></div><nav><a href="#menu"></a></nav><div class="container"><div class="row"><div class="col-sm-12"><header><div class="logo"><a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a><h1 id="main-title" class="title">Tracy-xu'Blog</h1></div></header><section class="main"><div class="post"><div class="post-header index"><h1 class="title"><a href="/2015/07/01/Git-Guide/">Git Guide</a></h1><div class="post-info"><span class="date">2015-07-01</span> <span class="category"><a href="/categories/engineering/">engineering</a></span></div></div><div class="content"><p>已经处理：</p><p><a href="https://juejin.cn/post/6844903598522908686" target="_blank" rel="noopener">https://juejin.cn/post/6844903598522908686</a></p><p>未处理：</p><p><a href="https://www.cnblogs.com/best/p/7474442.html#!comments" target="_blank" rel="noopener">https://www.cnblogs.com/best/p/7474442.html#!comments</a></p><p><a href="https://juejin.cn/post/6844904019245137927" target="_blank" rel="noopener">https://juejin.cn/post/6844904019245137927</a></p><p><a href="https://juejin.cn/post/6974184935804534815" target="_blank" rel="noopener">https://juejin.cn/post/6974184935804534815</a></p><p><a href="https://juejin.cn/post/6844903684476764168" target="_blank" rel="noopener">https://juejin.cn/post/6844903684476764168</a></p><p><a href="https://juejin.cn/post/6869519303864123399" target="_blank" rel="noopener">https://juejin.cn/post/6869519303864123399</a></p><p><a href="https://juejin.cn/post/6904524764761554951" target="_blank" rel="noopener">https://juejin.cn/post/6904524764761554951</a></p><p>内部原理：<a href="http://jingsam.github.io/archives/" target="_blank" rel="noopener">http://jingsam.github.io/archives/</a></p><p><a href="https://www.cnblogs.com/best/p/7474442.html#!comments" target="_blank" rel="noopener">https://www.cnblogs.com/best/p/7474442.html#!comments</a></p><p><a href="https://github.com/skywind3000/awesome-cheatsheets/blob/master/tools/git.txt" target="_blank" rel="noopener">https://github.com/skywind3000/awesome-cheatsheets/blob/master/tools/git.txt</a></p><p><a href="http://www.git-tower.com/learn" target="_blank" rel="noopener">http://www.git-tower.com/learn</a></p><p><a href="http://rogerdudler.github.io/git-guide/" target="_blank" rel="noopener">http://rogerdudler.github.io/git-guide/</a></p><p>官网教程：<a href="https://git-scm.com/book/zh/v2/Git-%E5%9F%BA%E7%A1%80-%E8%AE%B0%E5%BD%95%E6%AF%8F%E6%AC%A1%E6%9B%B4%E6%96%B0%E5%88%B0%E4%BB%93%E5%BA%93" target="_blank" rel="noopener">https://git-scm.com/book/zh/v2/Git-%E5%9F%BA%E7%A1%80-%E8%AE%B0%E5%BD%95%E6%AF%8F%E6%AC%A1%E6%9B%B4%E6%96%B0%E5%88%B0%E4%BB%93%E5%BA%93</a></p><p>官网 API 文档：<a href="http://git-scm.com/docs" target="_blank" rel="noopener">http://git-scm.com/docs</a><br>中文：<a href="https://git-scm.com/book/zh/v2" target="_blank" rel="noopener">https://git-scm.com/book/zh/v2</a></p><p><a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="noopener">Git教程</a> –&gt; 廖老师@廖雪峰写的 Git 教程，墙裂推荐！！！</p><p>Git 简明指南：<a href="https://www.runoob.com/manual/git-guide/、https://www.runoob.com/manual/git-guide/" target="_blank" rel="noopener">https://www.runoob.com/manual/git-guide/、https://www.runoob.com/manual/git-guide/</a></p><p>PDF 版命令手册：<a href="https://www.runoob.com/manual/github-git-cheat-sheet.pdf" target="_blank" rel="noopener">https://www.runoob.com/manual/github-git-cheat-sheet.pdf</a></p><p>忽略某些文件时，需要编写 .gitignore，然后将 .gitignore 放到版本库中</p><p><a href="https://www.runoob.com/git/git-workspace-index-repo.html" target="_blank" rel="noopener">https://www.runoob.com/git/git-workspace-index-repo.html</a></p><p>与 github、gitbucket、gitlab、gogs</p><p>远程仓库管理系统（基于 Git）：功能一般包括，Git 版本库，问题管理，wiki</p><p>git commit 要不要归类到 分支管理 目录中</p><p>git rebase<br>git rm<br>git reset</p><p>use “git rm –cached<file>…” to unstage<br>use “git reset HEAD<file>…” to unstage</file></file></p><p>svn 是集中式的，svn commit 会直接提交到中央服务器，必须要联网</p><p><a href="https://blog.csdn.net/weixin_40005373/article/details/112191117" target="_blank" rel="noopener">https://blog.csdn.net/weixin_40005373/article/details/112191117</a></p><p><a href="https://tortoisesvn.net/docs/nightly/TortoiseSVN_zh_CN/tsvn-cli-main.html" target="_blank" rel="noopener">https://tortoisesvn.net/docs/nightly/TortoiseSVN_zh_CN/tsvn-cli-main.html</a></p><p><a href="https://www.runoob.com/svn/svn-commit.html" target="_blank" rel="noopener">https://www.runoob.com/svn/svn-commit.html</a></p><p>注：Git 里面没有主干 – trunk 的概念（SVN 中式区分 trunk 和 branches 的），可以将主分支 – master branches 理解为主干。</p><p>SVN 上的分支不是引用而是复制。</p><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul><li>分布式</li></ul><p>Git 是分布式版本控制系统，这不同于 SVN 这类集中式版本控制系统，可以完全去中心化工作，不用和中央服务器 (remote server) 进行通信，在本地即可进行全部版本控制操作，包括 commit、log、diff…，即便是离线下。</p><ul><li>快照</li></ul><p>分支在SVN中实际上是版本库中的一份copy，而git一个仓库是一个快照，所以git 切换、合并分支等操作更快速。</p><ul><li>指针</li></ul><p>Git 分支是指针指向某次提交，而 SVN 分支是拷贝的目录。这个特性使 Git 的分支切换非常迅速，且创建成本非常低。</p><h3 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h3><ul><li><p>Index</p></li><li><p>Object</p></li></ul><p>git三大对象类型: 数据对象(Blob Object) / 树对象(Tree Object) / 提交对象(Commit Object)</p><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><ul><li>三大区域</li></ul><p>在 Git 项目中，存在三大区域：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Workspace/Working Tree/Working Directory：工作区</span><br><span class="line">Index/Stage：暂存区、索引</span><br><span class="line">Repository/Git Directory：版本库、仓库、资源库、Git 目录</span><br></pre></td></tr></table></figure><p><img src="/images/engineering/git/areas.png" alt="Git Flow 流程图"></p><p>基本的 Git 工作流程：在工作区中修改文件。<code>git add</code> 将你想要下次提交的更改选择性地暂存，这样只会将更改的部分添加到暂存区。<code>git commit</code> 提交更新，找到暂存区的文件，将快照永久性存储到 Git 目录。</p><p><code>git add</code> 是让文件进入 staged，<code>git commit</code> 是让文件进入 committed。</p><p>暂存区设计目的之一，就是为了实现 add，选择性提交。</p><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>Todo……</p><p><a href="https://zhuanlan.zhihu.com/p/53750883" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/53750883</a></p><p>前三个回答：<a href="https://www.zhihu.com/question/19946553/answer/29033220" target="_blank" rel="noopener">https://www.zhihu.com/question/19946553/answer/29033220</a></p><p><a href="https://zhuanlan.zhihu.com/p/96631135" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/96631135</a></p><p><a href="https://zhuanlan.zhihu.com/p/98679880" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/98679880</a></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>Linux 上使用 apt（或 yum） 安装 <code>sudo apt install git</code>，Windows 上可以从 Git 官网<a href="https://git-scm.com/downloads" target="_blank" rel="noopener">下载安装程序</a>，Mac OS 上，Xcode 默认集成了 Git，如果没有安装 Xcode，可通过 Homebrew 单独安装。</p><p>另外，Windows 中要想在 CMD 中执行 Git，需要将 Git 添加到环境变量 path 中。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Program Files\Git\bin</span><br><span class="line">C:\Program Files\Git\mingw64\libexec\git-core</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git help [-a|--all] [-g|--guide] [-i|--info|-m|--man|-w|--web] [COMMAND|GUIDE]    # git help help 查看 help 命令如何使用</span><br></pre></td></tr></table></figure><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>Git 共有三级配置，优先级依次是本地配置 &gt; 全局配置 &gt; 系统配置。系统配置在 <code>/etc/gitconfig</code> 文件中（Windows 在 <code>/mingw64/etc/gitconfig</code>。Windows Git Bash 中的根目录是 Git 的安装目录），全局配置在 <code>~/.gitconfig</code> 文件中，本地配置在本地仓库的 <code>.git/config</code> 文件中。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># cat ~/.gitconfig 如下所示</span><br><span class="line">[user]</span><br><span class="line">	email = 240866271@qq.com</span><br><span class="line">	name = Tracy</span><br><span class="line">[winUpdater]</span><br><span class="line">	recentlySeenVersion = 2.17.0.windows.1</span><br><span class="line">[credential]</span><br><span class="line">	helper = manager</span><br><span class="line">[commit]</span><br><span class="line">	template = D:/commit-template</span><br></pre></td></tr></table></figure><p>注：mingw（Minimalist GNU on Windows） 是一款 Windows 上的 GNU 工具集（含 vim、ssh client…），mingw64 是其 64 位版。Windows 版 Git 自带 mingw。</p><h3 id="查看配置信息"><a href="#查看配置信息" class="headerlink" title="查看配置信息"></a>查看配置信息</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git config --system --list    # 查看系统配置</span><br><span class="line">git config --global --list    # 查看全局配置</span><br><span class="line">git config --local --list     # 查看 repository 配置</span><br><span class="line">git config --list             # 查看当前配置（配置信息会合并，结果是本地、全局、系统三者的合并）</span><br><span class="line">git config &lt;setting&gt;          # 查看特定配置，比如 git config user.name</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="设置配置信息"><a href="#设置配置信息" class="headerlink" title="设置配置信息"></a>设置配置信息</h3><p>最常见的自定义配置是用户信息（用户名和邮件地址，commit 时用）、Commit Message Template、Credential Helper。</p><ul><li>用户信息</li></ul><p>用户信息用于 commit 时标示用户身份，git log 的提交日志中可以查看，如果没有配置，在 MacOS 下会使用操作系统用户名。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 姓名</span><br><span class="line">git config --global user.name &quot;Tracy&quot;</span><br><span class="line"># 邮箱</span><br><span class="line">git config --global user.email &quot;240866271@qq.com&quot;</span><br></pre></td></tr></table></figure><p>注：–global 参数是全局参数，也就是这些命令在这台电脑的所有 Git 仓库下都有用。</p><ul><li>提交模版</li></ul><p>Commit Message Template</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global commit.template /d/commit-template</span><br></pre></td></tr></table></figure><ul><li>换行</li></ul><p>由于各操作系统文本文件所使用的换行符不一样，UNIX/Linux/OS X 使用的是 LF，Windows/Dos 使用的 CRLF。Git 默认提供了一个“换行符自动转换”功能。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.autocrlf xx   # true、input（推荐使用）、false</span><br></pre></td></tr></table></figure><p>true 表示开启自动转换，迁入时将文件换行风格转换成 Unix 风格，迁出时根据本地系统确定是否转换成 CRLF。<br>input 表示迁入的时候将换行风格转换成 Unix 风格，迁出时不做处理。<br>false 表示迁入迁出都不对换行风格进行处理。</p><ul><li>其他</li></ul><p>除了上述常用配置，还有其他的配置，比如颜色、别名。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 显示颜色，会让命令输出看起来更醒目</span><br><span class="line">git config --global color.ui true</span><br><span class="line"></span><br><span class="line"># status、checkout 别名</span><br><span class="line">git config --global alias.st status            # st 就表示 status。git st 等价于 git status</span><br><span class="line">git config --global alias.co checkout          # co 就表示 checkout</span><br><span class="line"></span><br><span class="line"># unstage 别名</span><br><span class="line">git config --global alias.unstage &apos;reset HEAD&apos; # git unstage test.js 等价于 git reset HEAD test.js，可以把暂存区的修改撤销（unstage），重新放回工作区</span><br><span class="line"></span><br><span class="line"># 显示最后一次提交信息别名</span><br><span class="line">git config --global alias.last &apos;log -1&apos;        # git last 就能显示最后一次提交</span><br><span class="line"></span><br><span class="line"># log 别名</span><br><span class="line">git config --global alias.lg </span><br><span class="line">&quot;log --color --graph --pretty=format:&apos;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&apos; --abbrev-commit&quot;</span><br><span class="line"></span><br><span class="line"># git init 默认分支名</span><br><span class="line">git config --global init.defaultBranch main    # 从 master 改为 main</span><br></pre></td></tr></table></figure><p>注，可直接编辑配置文件来设置配置信息。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --system -e    # 系统配置</span><br><span class="line">git config --global -e    # 全局配置</span><br><span class="line">git config -e             # 本地配置</span><br></pre></td></tr></table></figure><h2 id="版本管理"><a href="#版本管理" class="headerlink" title="版本管理"></a>版本管理</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"># 初始化仓库</span><br><span class="line">git init &lt;folder&gt;                  # 带 --bare 参数，可创建一个裸库</span><br><span class="line"></span><br><span class="line"># 将文件添加到暂存区</span><br><span class="line">git add -p &lt;file&gt;</span><br><span class="line"></span><br><span class="line"># 将暂存区文件添加到本地仓库中（会生成唯一的 hash 值作为 commit id）</span><br><span class="line">git commit -m &quot;add LICENSE&quot;        # 如果想要记述的更加详细，不加 -m 参数即可</span><br><span class="line"># 修改最后一次 commit message（如果不是最后一次，需要组合使用 rebase 命令，才能完成）</span><br><span class="line">git commit --amend</span><br><span class="line"></span><br><span class="line"># 从版本库中删除文件</span><br><span class="line">git rm &lt;file&gt;                      # 删除工作区文件，并删除暂存区对应文件记录</span><br><span class="line">git rm --cached &lt;file&gt;             # 删除暂存区文件记录</span><br><span class="line"></span><br><span class="line"># 查看仓库状态</span><br><span class="line"># Git 文件的 4 种状态：untracked(未跟踪)、staged(已暂存)、unmodified/committed(已提交)、modified(已修改)，它们之间相互转换流程</span><br><span class="line">git status                         # 查看所有文件状态</span><br><span class="line">git status [filename]              # 查看指定文件状态</span><br><span class="line"></span><br><span class="line"># 比较差异（看懂 git diff）</span><br><span class="line">git diff              # 比较 workspace 与 index 的差异</span><br><span class="line">git diff HEAD         # 比较 workspace 与 local repository 中提交记录的差异，其中 HEAD 表示最新提交，HEAD^ 表示上一个提交，HEAD^^ 表示上上一个提交，依此类推，也可以用 HEAD~X 表示，X 代表 ^ 的个数</span><br><span class="line">git diff --cached/--staged     # 比较 index 与 local repositorty  的差异</span><br><span class="line">git diff hash1 hash2  # 比较两个提交记录的差异</span><br><span class="line"></span><br><span class="line"># 查看提交日志</span><br><span class="line">git log          # 可以加参数，比如 --pretty=oneline</span><br><span class="line">git reflog</span><br><span class="line"></span><br><span class="line"># 版本回退</span><br><span class="line">git reset --hard HEAD^             # 当前版本 HEAD,上一个版本 HEAD^,上上个版本 HEAD^^</span><br><span class="line">git reset --hard 130f10a           # 或 HEAD~100</span><br><span class="line"></span><br><span class="line"># 把暂存区的修改撤销掉（to unstage）</span><br><span class="line">git reset HEAD filename</span><br><span class="line"></span><br><span class="line"># 查看命令记录</span><br><span class="line">git reflog</span><br><span class="line"></span><br><span class="line"># 丢弃工作区的修改，回到最近一次 git commit 或 git add 时的状态</span><br><span class="line">git checkout -- README.md</span><br><span class="line"></span><br><span class="line"># 把误删的文件恢复到最新版本，checkout 其实用版本库里的版本替换工作区的版本</span><br><span class="line">git checkout -- README.md</span><br></pre></td></tr></table></figure><p>廖雪峰时光穿梭机</p><p>这列的版本指的是提交记录。</p><p>这个也是我目前不太熟悉的地方，开发中常常需要将回退项目的操作，会退至某次提交</p><p>todo。。。</p><h2 id="分支管理"><a href="#分支管理" class="headerlink" title="分支管理"></a>分支管理</h2><p>分支是用来进行并行作业的。<code>git init</code> 会默认创建 master 主分支。</p><p>以 dev 和 master 作为实例分支。</p><h3 id="本地分支"><a href="#本地分支" class="headerlink" title="本地分支"></a>本地分支</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># 查看分支（当前分支前面标有 × 号）</span><br><span class="line">git branch                                # 不带参数查看本地分支，-a 查看所有分支，-r 列出远程跟踪的分支（不是远程分支）</span><br><span class="line"></span><br><span class="line"># 创建分支（基于当前分支）</span><br><span class="line">git branch &lt;branch-name&gt;                  # 只创建不切换</span><br><span class="line"></span><br><span class="line"># 切换分支</span><br><span class="line">git checkout dev</span><br><span class="line"></span><br><span class="line"># 创建（基于当前分支）和切换分支</span><br><span class="line">git checkout -b dev                       # 相当于 git branch dev、git checkout dev</span><br><span class="line">git checkout --orphan dev                 # 创建一个没有任何的提交记录的空分支，但是当前分支的内容都有，可用 git rm -rf . 删除原来代码树下的所有文件</span><br><span class="line"></span><br><span class="line"># 重新命名分支</span><br><span class="line">git branch -m &lt;old-branch-name&gt; &lt;new-branch-name&gt;</span><br><span class="line"></span><br><span class="line"># 合并分支（合并指定分支到当前分支，比如当前分支是 master）</span><br><span class="line">git merge dev</span><br><span class="line">git merge --no-ff -m &quot;merge with no-ff&quot; dev   # --no-ff 参数，表示禁用 Fast forward</span><br><span class="line"></span><br><span class="line"># 删除分支</span><br><span class="line">git branch -d dev                         # 删除已合并的本地分支（但不能删除当前分支，需要切换，才能删除）。-d -r 参数删除远程追踪分支（只是删除 git branch -r 列表中的追踪分支，并不会删除远程分支）</span><br><span class="line">git branch -D dev                         # 强行删除一个没有合并过的本地分支</span><br><span class="line"></span><br><span class="line"># 看看分支的历史提交记录</span><br><span class="line">git log --graph --pretty=oneline --abbrev-commit</span><br></pre></td></tr></table></figure><h3 id="远程分支"><a href="#远程分支" class="headerlink" title="远程分支"></a>远程分支</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># 拉取远程仓库更新，但不合并</span><br><span class="line">git fetch                     # 默认下，git fetch 取回所有分支的更新，如果只想取回特定分支的更新，可以指定分支名，比如：git fetch origin master</span><br><span class="line"></span><br><span class="line"># 拉取远程仓库更新，且合并（git pull [远程主机名] [远程分支名]:[本地分支名]）（实质上，这等同于先做git fetch，再做git merge）</span><br><span class="line">git pull</span><br><span class="line">git pull origin dev           # 如果省略本地分支名，则表示远程分支与当前分支合并</span><br><span class="line"></span><br><span class="line"># 向远程仓库库推送更新（git push [远程主机名] [本地分支名]:[远程分支名]）（为防止冲突，push 前要先 pull）</span><br><span class="line">git push -u origin master     # 当前分支可能与多个主机存在追踪关系（tracking），所以首次要用 -u（--set-upstream）指定一个默认主机（upstream），以后可直接 git push</span><br><span class="line">git push origin master        # 如果省略远程分支名，则表示将本地分支推送与之存在&quot;追踪关系&quot;的远程分支，如果该远程分支不存在，则会被新建</span><br><span class="line">git push origin :dev          # 如果省略本地分支名，则表示删除指定的远程分支，因为这等同于推送一个空的本地分支到远程分支</span><br><span class="line">git push origin               # 将当前分支推送到 origin 主机的对应分支</span><br><span class="line">git push                      # 如果当前分支只有一个追踪分支，那么连主机名都可以省略</span><br><span class="line">git push --force              # --force/-f 强制推送</span><br><span class="line"></span><br><span class="line"># 删除远程分支</span><br><span class="line">git push origin --delete dev  # 删除 origin 主机的 dev 分支。注：远程的默认分支，不能为当前将要删的目标分支，如果是，需要将默认分支切换到其他分支上，再删</span><br><span class="line"></span><br><span class="line"># 从远程库 clone，默认情况只能看到 master 分支，需要在 dev 分支，必须创建远程 origin 的 dev 分支到本地</span><br><span class="line">git checkout -b dev origin/dev</span><br><span class="line">git checkout -b branch-name origin/branch-name</span><br><span class="line">git branch --set-upstream branch-name origin/branch-name # 关联</span><br></pre></td></tr></table></figure><p>注：不带任何参数的 git push，默认只推送当前分支，这叫做 simple 方式。此外，还有一种 matching 方式，会推送所有有对应的远程分支的本地分支。Git 2.0 版本之前，默认采用 matching 方法，现在改为默认采用 simple 方式。如果要修改这个设置，可以采用 git config 命令。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># matching</span><br><span class="line">git config --global push.default matching</span><br><span class="line"></span><br><span class="line"># simple</span><br><span class="line">git config --global push.default simple</span><br></pre></td></tr></table></figure><h2 id="标签管理"><a href="#标签管理" class="headerlink" title="标签管理"></a>标签管理</h2><p>Git 中的标签和分支有点类似，都是引用或者说指针，不过标签的位置是固定的，在给指定提交打好标签以后，它就固定于此位置，而分支的位置是会不断变动的，随着分支的向前推移或者向后回滚，都在不断变化。分支和标签的用处也不一样，分支用于并行作业，而标签用于处理发布。</p><p>Git 标签分为两种类型：轻量型（lightweight）和附注型（annotated）。轻量标签是指向特定提交对象的引用，而附注标签则是仓库中的一个独立对象，它有自身的校验和信息，包含着标签的名字，电子邮件地址和日期，以及标签说明，标签本身也允许使用 GNU Privacy Guard (GPG) 来签署或验证。建议使用附注标签，以便保留相关信息。标签名应采用统一的格式，<code>v${MajorVersion}.${MinorVersion}.${FixVersion}-${TypeLabel}</code>，其中 TypeLabel (alpha、 beta…) 可选。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 查看标签</span><br><span class="line">git tag                                 # 查看所有 tag</span><br><span class="line">git tag -l v1.0.*                       # 查看符合模式的 tag</span><br><span class="line">git show v1.0.0                         # 查看 tag 信息</span><br><span class="line"></span><br><span class="line"># 新建标签</span><br><span class="line">git tag v1.0.0                          # 新建轻量 tag</span><br><span class="line">git tag v1.0.0 9fceb02                  # 为某个 commit 新建 tag（一般用于后期加注标签）。用 git log --pretty=oneline --abbrev-commit 查看 commit id</span><br><span class="line">git tag -a v1.0.0 -m &quot;message&quot;          # 新建带注释的 tag（用 -a 来创建一个带备注的 tag，-m 指定说明文字）</span><br><span class="line"></span><br><span class="line"># 推送标签</span><br><span class="line">git push origin v1.0.0                  # 推送某个具体 tag</span><br><span class="line">git push origin --tags                  # 推送所有 tag</span><br><span class="line"></span><br><span class="line"># 切换标签</span><br><span class="line">git checkout v1.0.0                     # 切换方法跟分支一样</span><br><span class="line"></span><br><span class="line"># 删除标签</span><br><span class="line">git tag -d v1.0.0                       # 删除本地某个 tag</span><br><span class="line">git push origin :refs/tags/v1.0.0   # 删除远端某个 tag</span><br></pre></td></tr></table></figure><h2 id="存储管理"><a href="#存储管理" class="headerlink" title="存储管理"></a>存储管理</h2><p>Stash 可用在一些特殊的工作场景中，比如，需要临时修复 Bug，可以把当前工作现场储藏起来，等 Bug 修复后恢复现场后继续工作。在 Git Flow 下，Stash 基本用不到。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 保存存储</span><br><span class="line">git stash</span><br><span class="line">git stash save &quot;save message&quot; # 带注释的存储</span><br><span class="line"></span><br><span class="line"># 查看存储列表</span><br><span class="line">git stash list</span><br><span class="line"></span><br><span class="line"># 查看存储详情</span><br><span class="line">git stash show                          # 默认查看第一个 stash，即 stash@&#123;0&#125;，可以以指定。另外，-p 参数，可以查看到具体的详情</span><br><span class="line"></span><br><span class="line"># 恢复存储</span><br><span class="line">git stash pop                           # 恢复的同时把存储也删了，默认使用第一个 stash，即 stash@&#123;0&#125;，也可以指定 git stash pop stash@&#123;$num&#125;</span><br><span class="line">git stash apply                         # 恢复某个存储，但不会把存储从存储列表中删除，默认使用第一个存储，也可以指定</span><br><span class="line"></span><br><span class="line"># 删除存储</span><br><span class="line">git stash drop                          # 删除某个存储，默认使用第一个 stash，即 stash@&#123;0&#125;，也可以指定</span><br><span class="line">git stash clear                         # 删除所有存储</span><br></pre></td></tr></table></figure><h2 id="gitignore"><a href="#gitignore" class="headerlink" title=".gitignore"></a>.gitignore</h2><p>.gitignore 配置文件用于忽略文件，不被添加到版本库中，其配置语法如下。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">以斜杠 / 开头表示目录</span><br><span class="line">以星号 * 通配多个字符</span><br><span class="line">以问号 ? 通配单个字符</span><br><span class="line">以方括号 [] 包含单个字符的匹配列表</span><br><span class="line">以叹号 ! 表示不忽略匹配到的文件或目录</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 忽略所有 txt 结尾的文件</span><br><span class="line">*.txt</span><br><span class="line"># 忽略 doc 目录下 所有 txt 文件，不包括子目录（doc/subdir/a.txt）</span><br><span class="line">doc/*.txt</span><br><span class="line"># 忽略 doc 目录下所有 txt 的文件，包括子目录</span><br><span class="line">doc/**/*.txt</span><br><span class="line"></span><br><span class="line"># README.txt 除外</span><br><span class="line">!README.txt</span><br><span class="line"></span><br><span class="line"># 忽略 build/ 目录下的所有文件（不管 build 是根目录还是子目录，都会被忽略）</span><br><span class="line">build/</span><br><span class="line"></span><br><span class="line"># 忽略根目录下的 TODOLIST 文件（不包括 subdir/TODOLIST）</span><br><span class="line">/TODOLIST</span><br></pre></td></tr></table></figure><p>注：Git 对于 .gitignore 配置文件是按行从上到下进行规则匹配的，如果前面的规则匹配的范围更大，则后面的规则将不会生效。</p><h2 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h2><p>远程中心化仓库可用来备份存储和共享协作（clone、push、pull…）。</p><h3 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># 生成私钥和公钥证书</span><br><span class="line">ssh-keygen -t rsa -C &quot;any comment can be here&quot;</span><br><span class="line"></span><br><span class="line"># 测试证书登录是否设置成功</span><br><span class="line">ssh -T git@github.com</span><br><span class="line"></span><br><span class="line"># 克隆远程仓库</span><br><span class="line">git clone [remote url] [local url]                    # git clone git@github.com:michaelliao/gitskills.git （GitHub 可以使用 HTTPS 和 SSH 协议）</span><br><span class="line"></span><br><span class="line"># 添加远程仓库</span><br><span class="line">git remote add [shortname] [url]                      # git remote add origin git@github.com:Windrivder/Windrivder.git</span><br><span class="line"></span><br><span class="line"># 删除远程仓库</span><br><span class="line">git remote rm [remote name]</span><br><span class="line"></span><br><span class="line"># 修改远程仓库名</span><br><span class="line">git remote rename [old remote name] [new remote name]</span><br><span class="line"></span><br><span class="line"># 要查看远程库的信息</span><br><span class="line">git remote                                            # 查看已经存在的远程仓库</span><br><span class="line">git remote -v                                         # 查看已经存在的远程仓库的详细信息</span><br></pre></td></tr></table></figure><h3 id="免密登录"><a href="#免密登录" class="headerlink" title="免密登录"></a>免密登录</h3><p>SSH 可通过证书来实现免密登录，然而，这对 HTTP 协议来说是不可能的，每一个连接都是需要用户名和密码的（<a href="https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%87%AD%E8%AF%81%E5%AD%98%E5%82%A8" target="_blank" rel="noopener">官网文档</a>）。为了不用每次都输入用户名和密码，Git 使用 credential.help 来存储本地凭证（默认所有都不缓存，每一次连接都会询问你的用户名和密码），其所支持的选项如下。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cache        # cache 模式会将凭证存放在内存中一段时间。 密码永远不会被存储在磁盘中，并且在 15 分钟后从内存中清除</span><br><span class="line">store        # store 模式会将凭证用明文的形式存放在磁盘中（默认在 home 目录），永不过期</span><br><span class="line">osxkeychain  # Mac 下 store 的加密版，凭证保存在用户的钥匙串中</span><br><span class="line">manager      # Windows 下 store 的加密版，凭证保存在 Windows 的凭据管理器中。在 system 级别被设置（credential.helper=manager），优先于 global 和 local</span><br></pre></td></tr></table></figure><p>可通过 Git 的帮助文档来查看我们系统支持哪种 helper。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># Linux 下</span><br><span class="line">git help -a | grep credential</span><br><span class="line"># 输出结果</span><br><span class="line">credential                 remote-ftps</span><br><span class="line">credential-cache           remote-ftps</span><br><span class="line">credential-cache--daemo    remote-ftps</span><br><span class="line">credential-store           remote-ftps</span><br><span class="line"></span><br><span class="line"># Window 下（CMD 使用 findstr，PowerShell 使用 sls。或者在 C:\Program Files\Git\mingw64\libexec\git-core 目录下执行 (ls).Name | sls credential）</span><br><span class="line">git help -a | sls credential</span><br><span class="line"># 输出结果</span><br><span class="line">git-credential-manager.exe</span><br><span class="line">git-credential-store.exe</span><br><span class="line">git-credential-wincred.exe</span><br><span class="line">git-credential.exe</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 查看默认配置</span><br><span class="line">git config --list | grep credential</span><br></pre></td></tr></table></figure><p>Mac 默认 credential helper 是 osxkeychain，Windows 默认是 manager，而 Linux 默认不存储，需手动设置，以 store 模式为例。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global credential.helper store</span><br></pre></td></tr></table></figure><p>这样，会生成 <code>~/.git-credentials</code> 文件，用户信息会以明文保存在里面，<code>https://{userName}:{password}@github.com</code>，比如 <code>https://Tracy-xu:395083226%40gh@github.com</code>。</p><p>注：要操作一个远程仓库，首先要有 Git 服务器登录权限，然后要有项目权限（项目的所有者，或者 Collaborators – 协作者）。</p><h2 id="搭建-Git-服务器"><a href="#搭建-Git-服务器" class="headerlink" title="搭建 Git 服务器"></a>搭建 Git 服务器</h2><p>SSH 作为 Git 所支持通信协议其中之一，如果想通过 SSH 来使用 Git，则需要安装 SSH Server。Linux 一般都自带 SSH，而 Windows 配置起来麻烦，所以这里以 Linux 为例。</p><p>当然，在实际使用中不单单只会用到一个简单的非常底层的 Git 服务器，还有其他很多功能会使用到（比如，提供图形化界面的用户管理、SSH 管理、Log、Issue、Pull Request，甚至 Wiki 和持续集成），所以一般会使用 GitHub、GitLab、GitBucket 基于 Git 实现的 Git 仓库托管系统。</p><ol><li>安装 Git</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git                # CentOS 用 yum 带 -y 参数安装（-y 参数不用一步步询问）</span><br></pre></td></tr></table></figure><ol start="2"><li>创建一个 Git 用户，用来运行 Git 服务</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo adduser git</span><br><span class="line"></span><br><span class="line"># 默认情况下 SSH 不允许空密码用户登录（可在 sshd_config 中设置，参考相关章节），所以还需给 git 这个用户设置一个密码。</span><br><span class="line">sudo passwd git</span><br></pre></td></tr></table></figure><ol start="3"><li>设置证书登录</li></ol><p>收集所有需要登录的用户的公钥，就是他们自己的 id_rsa.pub 文件，把所有公钥导入到 <code>/home/git/.ssh/authorized_keys</code> 文件里，一行一个（参考 Linux 相关章节。在没有像 GitHub、GitLab 这样的平台来管理 authorized_keys，管理员手动管理 authorized_keys 很麻烦）。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 验证证书登录是否设置成功（如果让输入密码则没有成功，如果不让输入则设置成功）</span><br><span class="line">ssh -T git@192.168.10.140</span><br><span class="line"></span><br><span class="line"># 不让输入密码，回车后，原生的 Git Service 没有任何返回，GitHub 会有返回</span><br><span class="line">ssh -T git@github.com    </span><br><span class="line">Hi Tracy-xu! You&apos;ve successfully authenticated, but GitHub does not provide shell access.</span><br></pre></td></tr></table></figure><p>注：<code>~/.ssh</code> 目录在用户目录下（不同用户 <code>~</code> 下输入 <code>pwd</code>，结果会是 <code>/root</code> 或者 <code>/home/xxx</code>），修改 <code>~/.ssh/authorized_keys</code> 只对当前用户生效。另外，如果不设置证书登录，默认会使用密码登录。</p><ol start="4"><li>初始化 Git 仓库</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 选定一个目录作为 Git 仓库，假定是 /srv/sample.git，在 /srv 目录下输入命令</span><br><span class="line">sudo git init --bare sample.git</span><br><span class="line"></span><br><span class="line"># 把 owner 改为 git（如果这一步不设置，push 时会报权限不足：insufficient permission for adding an object to repository databa）</span><br><span class="line">sudo chown -R git:git sample.git</span><br></pre></td></tr></table></figure><p>与 <code>git init</code> 不同的是，<code>git init --bare</code> 被用来创建“裸库”，裸库没有 work tree（工作区），只有 .git 目录，记录着版本历史，一般用于公共的远程中央仓库，因为服务器上的 Git 仓库纯粹是为了共享，所以不让用户直接登录到服务器上去改工作区。另外，服务器上的 Git 仓库通常都以 .git 结尾。</p><ol start="5"><li>禁用 Shell 登录</li></ol><p>出于安全考虑，第二步创建的 git 账户不允许登录 Shell（GitHub 就是如此，<code>ssh git@github.com</code>），只允许 Git 相关操作，所以要把 Shell 登录改为 git-shell 登录。编辑 <code>/etc/passwd</code> 文件，为 git 用户指定的 git-shell 即可（参考 Linux passwd 相关章节）。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git:x:1001:1001::/home/git:/bin/bash</span><br><span class="line"></span><br><span class="line"># 改为</span><br><span class="line">git:x:1001:1001::/home/git:/usr/bin/git-shell</span><br></pre></td></tr></table></figure><p>还要复制一个名为 git-shell-commands 的目录，要不然 <code>ssh git@192.168.10.140</code> 时会报 fatal:Interactive git shell is not enabled 错误。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cp /usr/share/doc/git-1.8.3.1/contrib/git-shell-commands /home/git -R</span><br><span class="line">chown git /home/git/git-shell-commands/ -R</span><br><span class="line">chmod +x /home/git/git-shell-commands/help</span><br><span class="line">chmod +x /home/git/git-shell-commands/list</span><br></pre></td></tr></table></figure><p>现在，不管是开机登录，还是 su 切换用户登录，还是 SSH 远程登录，git 用户登录的都将是 git-shell，进来看到的是 <code>git&gt;</code> 而不是 <code>[root@localhost ~]#</code>。另外，不能将 git 账户登录权限改为 <code>/sbin/nologin</code>，禁用登录，要不然客户端在 clone 时会报 <code>fatal: protocol error: bad line length character: This</code> 错误。</p><ol start="6"><li>克隆远程仓库</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@192.168.10.140:/srv/sample.git</span><br></pre></td></tr></table></figure><p>直接 clone 会提示这是一个空仓库。也可以在本地创建一个仓库，然后添加 remote 地址。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">...</span><br><span class="line">git remote add origin ssh://git@192.168.10.140:/srv/sample.git      # clone 时可以省略 ssh:// 协议，设置地址时不可省略</span><br><span class="line">git push --set-upstream origin master                               # 可以缩写为 git push -u origin master</span><br></pre></td></tr></table></figure></div></div><div class="post"><div class="post-header index"><h1 class="title"><a href="/2013/12/26/jQuery 精粹/">JQuery 精粹</a></h1><div class="post-info"><span class="date">2013-12-26</span> <span class="category"><a href="/categories/javascript/">javascript</a></span></div></div><div class="content"><p>运用 JQuery 写一个 alert 插件<br>例如：<br><button>alert</button><button><br>$(‘button’).alert();<br>点击按钮将直接弹出 alert()对话框</button></p></div></div></section></div></div><div class="row"><div class="col-sm-12"><div class="wrap-pagination"><a href="/page/5/"><i class="fa fa-chevron-left" aria-hidden="true"></i> </a><a class="disabled" href="/"><i class="fa fa-chevron-right" aria-hidden="true"></i></a></div></div></div></div><div class="push"></div><footer class="footer-content"><div class="container"><div class="row"><div class="col-xs-12 col-sm-12 col-md-4 col-lg-4 footer-about"><h2>About</h2><p>享受编程和技术所带来的快乐</p></div><div class="col-xs-12 col-sm-12 col-md-4 col-lg-4 footer-categories"><h2>Categories</h2><p><a class="footer-post" href="/categories/html/">html</a> <a class="footer-post" href="/categories/scratch/">scratch</a> <a class="footer-post" href="/categories/jotting/">jotting</a> <a class="footer-post" href="/categories/pl/">pl</a></p></div><div class="col-xs-12 col-sm-12 col-md-4 col-lg-4 footer-search"><h2>Search</h2><form class="site-search-form"><input type="text" id="local-search-input" class="st-search-input"></form><div id="local-search-result" class="local-search-result-cls"></div></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><ul class="list-inline footer-social-icons"></ul></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><div class="footer-copyright">Copyright©Tracy-xu'Blog. All Rights Reserved.</div></div></div></div></footer><script src="/plugins/jquery-2.1.4.min.js"></script><script src="/plugins/TweenMax.min.js"></script><script src="/plugins/featherlight/featherlight.min.js"></script><script src="/js/main.js"></script></body></html><!-- rebuild by neat -->